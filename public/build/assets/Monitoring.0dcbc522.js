import{A as E,C as B}from"./AuthenticatedLayout.48f8babb.js";import{u as O,M as Y,P as K}from"./useFilteredComplains.51edf1c9.js";import{r as l,a as t,j as s,F as x,n as J,h as W}from"./app.4519d6dc.js";import{c as G}from"./index.esm.1cd3efba.js";import{I as q}from"./ImageShow.3e28fd5b.js";import{B as z}from"./index.esm.dd5fe391.js";import{d as Q}from"./dayjs.min.415809bc.js";import{N as U}from"./react-number-format.es.dfffa7d0.js";import V from"./ApproveModal.b1bd9709.js";import X from"./RejectedModal.46aa420e.js";import Z from"./Detail.cb7d9a87.js";import"./index.esm.99e4193c.js";import"./iconBase.54c9ab8b.js";import"./ResponsiveNavLink.908da91c.js";import"./transition.c4409f95.js";import"./Loading.55effcf5.js";/* empty css              */import"./index.esm.854d166d.js";import"./TextInput.599251b4.js";import"./PrimaryButton.f02db613.js";import"./InputError.fdb70530.js";import"./InputLabel.d7029a24.js";import"./Modal.0db1f459.js";import"./Toast.182ee843.js";import"./index.esm.b6eae90a.js";const Se=({auth:y,...$})=>{const{filters:n,setFilters:c,currentPage:d,setCurrentPage:te,displayData:u,totalPages:w,handlePageChange:v}=O({},20),[N,m]=l.exports.useState(),[C,p]=l.exports.useState(!1),i=e=>{m(e.target.getAttribute("data-url")),p(!0)};l.exports.useEffect(()=>{const e=JSON.parse(localStorage.getItem("monitoringFilters"));e&&Object.keys(e).length>0&&c(e)},[]),l.exports.useEffect(()=>{localStorage.setItem("monitoringFilters",JSON.stringify(n))},[n]);const P=e=>{m(""),p(!1)},b=[{title:"Create Ticket",formater:"date",column:"created_at",sortable:!1},{title:"Nomor Tiket",column:"ticket_id",sortable:!1},{title:"Nomor Resi",column:"connote",sortable:!1},{title:"Origin",column:"origin",sortable:!1},{title:"Destination",column:"destination",sortable:!1},{title:"Service",column:"services_code",sortable:!1},{title:"Shipper Name",column:"shipper_name",sortable:!1},{title:"Shipper Telp",column:"shipper_phone",sortable:!1},{title:"Cnee Name",column:"receiver_name",sortable:!1},{title:"Cnee Telp",column:"receiver_phone",sortable:!1},{title:"Pelapor",column:"complainant",sortable:!1},{title:"Pelapor Telp",column:"complainant_number",sortable:!1},{title:"Pelapor Email",column:"complainant_email",sortable:!1},{title:"Case",column:"case",sortable:!1},{title:"Diskripsi Barang",column:"goods_description",sortable:!1},{title:"Nilai Barang",column:"amount",sortable:!1},{title:"Packing Kayu",column:"packing",sortable:!1},{title:"Asuransi",column:"asuransi",sortable:!1},{title:"Packer",column:"packer",sortable:!1},{title:"Penawaran Packing Kayu",column:"penawaran_packing",sortable:!1},{title:"Penawaran Asuransi",column:"penawaran_asuransi",sortable:!1},{title:"Claim Propose",column:"claim_propose",formater:"currency",sortable:!1},{title:"Claim Approve",column:"claim_approved",formater:"currency",sortable:!1},{title:"Penyelesaian",column:"penyelesaian",sortable:!1},{title:"Pembebanan",column:"pembebanan",sortable:!1},{title:"SLA",column:"sla",formater:"date",sortable:!1},{title:"Status SLA",column:"status_sla",sortable:!1},{title:"Status Claim",column:"status",sortable:!1},{title:"Processed At",column:"processed_at",formater:"date",sortable:!1},{title:"Closed At",column:"closed_at",formater:"date",sortable:!1},{title:"Processed by",column:"processed_by",sortable:!1},{title:"Closed by",column:"closed_by",sortable:!1},{title:"Lampiran",column:"lampiran",sortable:!1},{title:"Document",column:"document",sortable:!1}],_=e=>{c({...n,...e})},k=e=>{c(e)},S=e=>{const r=e.target;r.disabled=!0,r.innerHTML="Wait";const a=e.target.getAttribute("data-id");try{W.visit(route("csoffice.claim.proccessdata",a),{method:put},{onSuccess:()=>{r.innerHTML="Proccess"},preserveScroll:!1})}catch{r.innerHTML="eror lo",setTimeout(()=>{r.innerHTML="Proccess",r.disabled=!1},500)}},M=()=>u.length===0?t(x,{children:t("tbody",{children:t("tr",{children:t("td",{colSpan:"2",children:"Data Not Found"})})})}):t("tbody",{children:u.map((e,r)=>s("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-xs",children:[t("th",{className:"px-6 py-1",children:s("div",{className:"flex justify-around items-center gap-3",children:[(d-1)*20+r+1,t(G,{className:"text-blue-500 hover:cursor-pointer",onClick:H,"data-id":e.id})]})}),b.map((a,o)=>a.column=="lampiran"?t("td",{className:"px-6 py-1",children:s("div",{className:"flex items-center justify-center gap-2",children:[t("button",{"data-url":e.complainant_idcard,onClick:i,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"KTP"}),t("button",{"data-url":e.complainant_bank,onClick:i,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Rekening"}),t("button",{"data-url":e.complainant_nota,onClick:i,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Nota"}),t("button",{"data-url":e.transfer_nota,onClick:i,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Transfer"})]})},o):a.column=="actions"?t("td",{className:"px-6 py-1",children:s("div",{className:"flex items-center justify-end gap-2",children:[!e.processed_by&&t("button",{"data-id":e.id,onClick:S,className:"px-2 py-2 bg-yellow-500 rounded-lg text-white hover:bg-yellow-600 focus:bg-yellow-700 focus:ring-2 focus:ring-yellow-600 text-xs disabled:cursor-not-allowed",children:"Proccess"}),!e.closed_at&&e.processed_by&&t("button",{"data-id":e.id,onClick:D,className:"px-2 py-2 bg-green-500 rounded-lg text-white hover:bg-green-600 focus:bg-green-700 focus:ring-2 focus:ring-green-600 text-xs",children:"Closed"}),!e.closed_at&&t("button",{"data-id":e.id,onClick:T,className:"px-2 py-2 bg-red-500 rounded-lg text-white hover:bg-red-600 focus:bg-red-700 focus:ring-2 focus:ring-red-600 text-xs",children:"Rejected"})]})},o):a.column=="document"?t("td",{className:"px-6 py-1",children:t("div",{className:"flex justify-center",children:t("a",{className:"p-2 border-gray-500 border rounded-lg hover:bg-gray-500 hover:text-white shadow focus:ring focus:ring-gray-400 focus:bg-gray-600 focus:text-white",target:"_blank",href:route("eclaim.exportpdf",e.ticket_id),children:t(z,{})})})},o):a.formater=="date"?t("td",{className:"px-6 py-1",children:e[a.column]?Q(e[a.column]).format("DD/MM/YYYY"):""},o):a.formater=="currency"?t("td",{className:"px-6 py-1",children:t(U,{value:e[a.column],displayType:"text",thousandSeparator:",",prefix:"Rp. "})},o):t("td",{className:"px-6 py-1 min-w-[10rem]",children:e[a.column]},o))]},r))}),[A,g]=l.exports.useState(!1),[j,f]=l.exports.useState(!1),[F,h]=l.exports.useState(!1),D=e=>{g({show:!0,id:e.target.getAttribute("data-id")})},T=e=>{f({show:!0,id:e.target.getAttribute("data-id")})},I=()=>{g(!1)},R=()=>{f(!1)},H=e=>{h({id:e.target.getAttribute("data-id"),show:!0})},L=()=>{h(!1)};return t(E,{auth:y,header:s(x,{children:[t("h2",{className:"font-semibold text-lg text-gray-800 dark:text-white leading-tight",children:"E-Claim"}),t(J,{title:"Claim"}),t("div",{className:"ml-auto",children:t("a",{className:"transition ease-in-out duration-150 bg-blue-500 disabled:hover:bg-blue-800 hover:bg-blue-700 focus:bg-blue-600 active:bg-blue-900 focus:ring-blue-500 disabled:cursor-not-allowed flex gap-2 items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest focus:outline-none focus:ring-2 hover:cursor-pointer",as:"button",title:"Create",href:route("claim.customer")})})]}),children:s(B,{children:[t(q,{imgs:N,show:C,onClosed:P}),t(V,{params:A,closeModal:I}),t(X,{params:j,closeModal:R}),t(Z,{params:F,closedModal:L}),t(Y,{header:b,datefilter:"created_at",editable:!0,data:M(),filters:n,sendFilter:_,decrementFiter:k}),t(K,{currentPage:d,totalPages:w,onPageChange:v})]})})};export{Se as default};
