import{A as E,C as O}from"./AuthenticatedLayout.48f8babb.js";import{u as Y,M as B,P as J}from"./useFilteredComplains.51edf1c9.js";import{r as s,a as t,j as l,F as x,n as W,h as G}from"./app.4519d6dc.js";import{c as K}from"./index.esm.1cd3efba.js";import{I as q}from"./ImageShow.3e28fd5b.js";import{B as z}from"./index.esm.dd5fe391.js";import{d as Q}from"./dayjs.min.415809bc.js";import{N as U}from"./react-number-format.es.dfffa7d0.js";import V from"./ApproveModal.b1bd9709.js";import X from"./RejectedModal.46aa420e.js";import Z from"./Detail.cb7d9a87.js";import"./index.esm.99e4193c.js";import"./iconBase.54c9ab8b.js";import"./ResponsiveNavLink.908da91c.js";import"./transition.c4409f95.js";import"./Loading.55effcf5.js";/* empty css              */import"./index.esm.854d166d.js";import"./TextInput.599251b4.js";import"./PrimaryButton.f02db613.js";import"./InputError.fdb70530.js";import"./InputLabel.d7029a24.js";import"./Modal.0db1f459.js";import"./Toast.182ee843.js";import"./index.esm.b6eae90a.js";const _e=({auth:y,...$})=>{const{filters:n,setFilters:i,currentPage:d,setCurrentPage:te,displayData:u,totalPages:w,handlePageChange:N}=Y({},20),[v,m]=s.exports.useState(),[C,p]=s.exports.useState(!1),c=e=>{m(e.target.getAttribute("data-url")),p(!0)};s.exports.useEffect(()=>{const e=JSON.parse(localStorage.getItem("claimFilter"));e&&Object.keys(e).length>0&&i(e)},[]),s.exports.useEffect(()=>{localStorage.setItem("claimFilter",JSON.stringify(n))},[n]);const S=e=>{m(""),p(!1)},g=[{title:"Nomor Tiket",column:"ticket_id",sortable:!1},{title:"Tanggal Claim",formater:"date",column:"created_at",sortable:!1},{title:"Nomor Resi",column:"connote",sortable:!1},{title:"Origin",column:"origin",sortable:!1},{title:"Destination",column:"destination",sortable:!1},{title:"Claim Propose",column:"claim_propose",formater:"currency",sortable:!1},{title:"Claim Approve",column:"claim_approved",formater:"currency",sortable:!1},{title:"SLA",column:"sla",formater:"date",sortable:!1},{title:"Status SLA",column:"status_sla",sortable:!1},{title:"Processed At",column:"processed_at",formater:"date",sortable:!1},{title:"Processed by",column:"processed_by",sortable:!1},{title:"Closed At",column:"closed_at",formater:"date",sortable:!1},{title:"Closed by",column:"closed_by",sortable:!1},{title:"Status",column:"status",sortable:!1},{title:"Lampiran",column:"lampiran",sortable:!1},{title:"Document",column:"document",sortable:!1},{title:"Actions",column:"actions",sortable:!1}],k=e=>{i({...n,...e})},M=e=>{i(e)},_=e=>{const o=e.target;o.disabled=!0,o.innerHTML="Wait";const r=e.target.getAttribute("data-id");try{G.visit(route("csoffice.claim.proccessdata",r),{method:"put",data:{_method:"put"}},{onSuccess:()=>{o.innerHTML="Proccess"},preserveScroll:!1})}catch(a){console.log(a),o.innerHTML="eror lo",setTimeout(()=>{o.innerHTML="Proccess",o.disabled=!1},500)}},P=()=>u.length===0?t(x,{children:t("tbody",{children:t("tr",{children:t("td",{colSpan:"2",children:"Data Not Found"})})})}):t("tbody",{children:u.map((e,o)=>l("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-xs",children:[t("th",{className:"px-6 py-1",children:l("div",{className:"flex justify-around items-center gap-3",children:[(d-1)*20+o+1,t(K,{className:"text-blue-500 hover:cursor-pointer",onClick:()=>H(e.id)})]})}),g.map((r,a)=>r.column=="lampiran"?t("td",{className:"px-6 py-1",children:l("div",{className:"flex items-center justify-center gap-2",children:[t("button",{"data-url":e.complainant_idcard,onClick:c,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"KTP"}),t("button",{"data-url":e.complainant_bank,onClick:c,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Rekening"}),t("button",{"data-url":e.complainant_nota,onClick:c,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Nota"}),t("button",{"data-url":e.transfer_nota,onClick:c,className:"px-2 py-2 bg-brand-500 rounded-lg text-white hover:bg-brand-600 focus:bg-brand-700 focus:ring-2 focus:ring-brand-600 text-xs",children:"Transfer"})]})},a):r.column=="actions"?t("td",{className:"px-6 py-1",children:l("div",{className:"flex items-center justify-end gap-2",children:[!e.processed_by&&t("button",{"data-id":e.id,onClick:_,className:"px-2 py-2 bg-yellow-500 rounded-lg text-white hover:bg-yellow-600 focus:bg-yellow-700 focus:ring-2 focus:ring-yellow-600 text-xs disabled:cursor-not-allowed",children:"Proccess"}),!e.closed_at&&e.processed_by&&t("button",{"data-id":e.id,onClick:D,className:"px-2 py-2 bg-green-500 rounded-lg text-white hover:bg-green-600 focus:bg-green-700 focus:ring-2 focus:ring-green-600 text-xs",children:"Closed"}),!e.closed_at&&t("button",{"data-id":e.id,onClick:T,className:"px-2 py-2 bg-red-500 rounded-lg text-white hover:bg-red-600 focus:bg-red-700 focus:ring-2 focus:ring-red-600 text-xs",children:"Rejected"})]})},a):r.column=="document"?t("td",{className:"px-6 py-1",children:t("div",{className:"flex justify-center",children:t("a",{className:"p-2 border-gray-500 border rounded-lg hover:bg-gray-500 hover:text-white shadow focus:ring focus:ring-gray-400 focus:bg-gray-600 focus:text-white",target:"_blank",href:route("eclaim.exportpdf",e.ticket_id),children:t(z,{})})})},a):r.formater=="date"?t("td",{className:"px-6 py-1",children:e[r.column]?Q(e[r.column]).format("DD/MM/YYYY"):""},a):r.formater=="currency"?t("td",{className:"px-6 py-1",children:t(U,{value:e[r.column],displayType:"text",thousandSeparator:",",prefix:"Rp. "})},a):t("td",{className:"px-6 py-1 min-w-[10rem]",children:e[r.column]},a))]},o))}),[A,b]=s.exports.useState(!1),[j,f]=s.exports.useState(!1),[F,h]=s.exports.useState(!1),D=e=>{b({show:!0,id:e.target.getAttribute("data-id")})},T=e=>{f({show:!0,id:e.target.getAttribute("data-id")})},I=()=>{b(!1)},R=()=>{f(!1)},H=e=>{h({id:e,show:!0})},L=()=>{h(!1)};return t(E,{auth:y,header:l(x,{children:[t("h2",{className:"font-semibold text-lg text-gray-800 dark:text-white leading-tight",children:"E-Claim"}),t(W,{title:"Claim"}),t("div",{className:"ml-auto",children:t("a",{className:"transition ease-in-out duration-150 bg-blue-500 disabled:hover:bg-blue-800 hover:bg-blue-700 focus:bg-blue-600 active:bg-blue-900 focus:ring-blue-500 disabled:cursor-not-allowed flex gap-2 items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest focus:outline-none focus:ring-2 hover:cursor-pointer",as:"button",target:"_blank",href:route("claim.customer"),children:"Create"})})]}),children:l(O,{children:[t(q,{imgs:v,show:C,onClosed:S}),t(V,{params:A,closeModal:I}),t(X,{params:j,closeModal:R}),t(Z,{params:F,closedModal:L}),t(B,{header:g,datefilter:"created_at",editable:!0,data:P(),filters:n,sendFilter:k,decrementFiter:M}),t(J,{currentPage:d,totalPages:w,onPageChange:N})]})})};export{_e as default};
