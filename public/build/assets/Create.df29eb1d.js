import{A as ae,C as le}from"./AuthenticatedLayout.f8a570eb.js";import{I as re}from"./InputArea.4c864cef.js";import{I as f}from"./InputError.2cf80b50.js";import{I as o}from"./InputLabel.08ef7b3f.js";import{L as ce}from"./Loading.e8c767db.js";import{P as L}from"./PrimaryButton.5692d158.js";import{S as g}from"./SelectList.5a4fd036.js";import{T as d}from"./TextInput.c94e0786.js";import{r as v,K as se,j as l,F as Y,a as e,n as te,b as oe}from"./app.7926ed05.js";import{d as N}from"./dayjs.min.da6faa20.js";import"./index.esm.194fd429.js";import"./index.esm.193ca722.js";import"./iconBase.cb821f7b.js";import"./index.esm.5aa1fb21.js";import"./ResponsiveNavLink.aa358d41.js";import"./transition.82c84654.js";import"./Toast.8bdc19f1.js";import"./index.esm.0b253c57.js";/* empty css              */const qe=({auth:z,...m})=>{const{sources:M,complaincase:ne}=m,[$,C]=v.exports.useState(!1),{data:c,setData:u,post:j,processing:E,errors:h}=se({branch:"Kediri",complainsource_id:"",caller_category:"",caller_sub_category:"",caller_contact_name:"",caller_contact_person:"",resi:"",complain_case_id:"",zona:"",sla:"",due_date:"",case_priority:"",followup_by:"",note:""});console.log(h);const x=v.exports.useRef(),P=a=>{x.current.readOnly=a},[b,w]=v.exports.useState("A"),[V,D]=v.exports.useState(!1),[r,k]=v.exports.useState("");console.log(r);const B=M.map(a=>({id:a.id,value:a.id,display:a.source==a.sub_source?a.source:`${a.source} - ${a.sub_source}`})),F=async a=>{C(!0);try{const s=await oe.post(route("apiservices.traceconnote.detail-hybrid"),{resi:c.resi});X(),w(s.data.zona),k(s.data),D(!1),P(!0)}catch{u("resi",""),w("A"),k(""),document.getElementById("resi").focus(),D(!0),console.error("eror lo")}C(!1)};let T=m.callers.map(a=>({id:a.id,value:a.id,display:a.caller}));const H=m.sendingoffices.map(a=>({id:a.id,value:a.nomor_debitur,display:a.area==1?`KDR - ${a.nama_agen}`:a.area==2?`TLG - ${a.nama_agen}`:`TRG - ${a.nama_agen}`})),O=a=>{var n,t,q,A;const s=a.target.value;if(s==1){const i={...c,caller_category:s,caller_sub_category:"customer",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==2){const i={...c,caller_category:s,caller_sub_category:"consignee",caller_contact_name:(n=r.receiver_name)!=null?n:"",caller_contact_person:(t=r.receiver_phone)!=null?t:""};u(i)}if(s==3){const i={...c,caller_category:s,caller_sub_category:"shipper",caller_contact_name:(q=r.shipper_name)!=null?q:"",caller_contact_person:(A=r.shipper_phone)!=null?A:""};u(i)}if(s==4){const i={...c,caller_category:s,caller_sub_category:"internal jne",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==5){const i={...c,caller_category:s,caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==6){const i={...c,caller_category:s,caller_sub_category:"corporate",caller_contact_name:"",caller_contact_person:""};u(i)}if(!s){const i={...c,caller_category:"",caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};u(i)}},K=()=>{if(c.caller_category==1)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Customer",disabled:!0})]});if(c.caller_category==2)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Consignee",disabled:!0})]});if(c.caller_category==3)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Shipper",disabled:!0})]});if(c.caller_category==4)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Internal JNE",disabled:!0})]});if(c.caller_category==5)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(g,{required:!0,className:"block w-full mt-1",options:H,nullvalue:!0,name:"caller_sub_category",onChange:p,value:c.caller_sub_category})]});if(c.caller_category==6)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Corporate",disabled:!0})]});if(!c.caller_category)return null},[_,S]=v.exports.useState(),[y,I]=v.exports.useState(),Z=()=>{const a=m.complaincase.filter(t=>t.zona==b),n=[...new Set(a.map(t=>t.category))].map(t=>({id:t,value:t,display:t}));return l("div",{className:"col-span-2",children:[e(o,{value:"Category"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,value:_,onChange:G,options:n})]})},G=a=>{S(a.target.value)},J=()=>{const a=m.complaincase.filter(t=>t.zona==b&&t.category==_),n=[...new Set(a.map(t=>t.case))].map(t=>({id:t,value:t,display:t}));return l("div",{className:"col-span-2",children:[e(o,{optional:!0,value:"Case"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,onChange:W,value:y,options:n})]})},W=a=>{I(a.target.value)},Q=()=>{const s=m.complaincase.filter(n=>n.zona==b&&n.category==_&&n.case==y).map(n=>({id:n.id,value:n.id,display:`${n.sub_case}`}));return l("div",{className:"col-span-2",children:[e(o,{optional:!0,value:"Sub Case"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,onChange:U,options:s})]})},U=a=>{const s=m.complaincase.filter(t=>t.id==a.target.value),n={...c,complain_case_id:s[0].id,zona:s[0].zona,sla:s[0].sla,due_date:s[0].sla==0?N().format("DD/MM/YYYY"):N().add(s[0].sla,"day").format("DD/MM/YYYY")};u(n)},X=()=>{S(""),I("");const a={...c,complain_case_id:"",zona:"",sla:"",due_date:""};u(a)},p=a=>{u(a.target.name,a.target.value)},R=[{id:1,value:"critical",display:"critical"},{id:2,value:"hight",display:"high"},{id:3,value:"medium",display:"medium"},{id:4,value:"low",display:"low"}],ee=m.followups.map(a=>({id:a.name,value:a.name,display:a.name}));return l(ae,{auth:z,header:l(Y,{children:[e("h2",{className:"font-semibold text-lg text-gray-800 dark:text-white leading-tight",children:"Action Claim"}),e(te,{title:"Approve Claim"})]}),children:[e(ce,{show:$}),e(le,{children:e("form",{onSubmit:a=>{a.preventDefault(),j(route("csoffice.complain.store"))},children:l("div",{className:"grid grid-cols-8 max-w-7xl mx-auto py-4 px-4 lg:px-0",children:[l("div",{className:"col-span-6",children:[e("h1",{className:"mb-2 text-lg",children:"Input Data Ticketing"}),l("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[l("div",{className:"mb-2",children:[e(o,{value:"Branch"}),e(d,{name:"branch",disabled:!0,className:"block w-full mt-1",value:c.branch})]}),l("div",{className:"mb-2",children:[e(o,{value:"Source"}),e(g,{required:!0,name:"complainsource_id",id:"complainsource_id",nullvalue:!0,className:"w-full mt-1",options:B,onChange:p}),e(f,{message:h.complainsource_id,className:"mt-1"})]})]}),l("div",{className:"mb-4",children:[e("h1",{className:"text-lg font-semibold text-gray-400 italic mb-3",children:"Isikan Jika Mempunyai Resi"}),l("div",{className:"flex items-center justify-start gap-4",children:[e(d,{onChange:p,name:"resi",id:"resi",ref:x,value:c.resi}),e(L,{disabled:r,onClick:F,padding:"px-3 py-2",title:"Cek Awb",className:"inline-block"})]}),V&&e(f,{message:"Resi Salah, Periksa Resi Anda Lagi",className:"mt-1"})]}),l("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[l("div",{className:"mb-2",children:[e(o,{value:"Caller"}),e(g,{className:"block w-full mt-1",name:"caller_category",options:T,required:!0,onChange:O,nullvalue:!0,value:c.caller_category}),e(f,{message:h.caller_category,className:"mt-1"})]}),K(),l("div",{className:"mb-2",children:[e(o,{optional:!0,value:"Caller Name"}),e(d,{name:"caller_contact_name",onChange:p,value:c.caller_contact_name,className:"block w-full mt-1"})]}),l("div",{className:"mb-2",children:[e(o,{optional:!0,value:"Caller CP"}),e(d,{name:"caller_contact_person",onChange:p,value:c.caller_contact_person,className:"block w-full mt-1"})]})]}),l("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[Z(),_&&J(),y&&Q(),l("div",{className:"col-span-1",children:[e(o,{value:"SLA"}),e(d,{className:"mt-1 block w-full",value:c.sla,disabled:!0})]}),l("div",{className:"col-span-1",children:[e(o,{value:"Zone"}),e(d,{className:"mt-1 block w-full",disabled:!0,value:c.zona})]})]}),l("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[l("div",{className:"col-span-2",children:[e(o,{value:"Case Priority"}),e(g,{className:"w-full mt-1",name:"case_priority",options:R,nullvalue:!0,onChange:p,required:!0})]}),l("div",{className:"col-span-1",children:[e(o,{value:"Due Date"}),e(d,{className:"mt-1 block w-full",value:c.due_date,disabled:!0})]}),l("div",{className:"col-span-2",children:[e(o,{value:"Followup By"}),e(g,{className:"w-full mt-1",name:"followup_by",options:ee,onChange:p,nullvalue:!0,required:!0})]})]}),e("div",{className:"grid grid-cols-8 gap-2",children:l("div",{className:"col-span-3",children:[e(o,{value:"Note",optional:!0}),e(re,{name:"note",id:"note",className:"mt-1 block w-full",onChange:p})]})}),e("div",{className:"w-full text-right flex gap-3",children:e(L,{disabled:E,className:"ml-auto",type:"submit",title:"submit"})})]}),e("div",{className:"col-span-2",children:l(Y,{children:[l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Nomor AWB"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.connote})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Input Date"}),e("div",{className:"py-2 px-3",children:N(r==null?void 0:r.connote_date).format("DD/MM/YYYY")})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Origin"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.origin})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Destination"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.destination})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.receiver_name})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee Phone"}),e("div",{className:"py-2 px-3",children:e("a",{href:`https://api.whatsapp.com/send/?phone=${r==null?void 0:r.receiver_phone}`,target:"_blank",children:r==null?void 0:r.receiver_phone})})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee Addres"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.receiver_city})]})]})})]})})})]})};export{qe as default};
