import{A as ee,C as ae}from"./AuthenticatedLayout.1e7d0ed0.js";import{I as le}from"./InputArea.c3ac5078.js";import{I as f}from"./InputError.8b8ae220.js";import{I as o}from"./InputLabel.c1ceeecc.js";import{L as re}from"./Loading.a3bad032.js";import{P as L}from"./PrimaryButton.8a9f5577.js";import{S as g}from"./SelectList.910abdef.js";import{T as d}from"./TextInput.7652921e.js";import{r as v,K as ce,j as l,F as Y,a as e,n as se,b as te}from"./app.d4bebd47.js";import{d as N}from"./dayjs.min.7fa16f1a.js";import"./index.esm.d1b32b09.js";import"./index.esm.c00ddcaa.js";import"./iconBase.fe507d98.js";import"./index.esm.92432541.js";import"./ResponsiveNavLink.455094c3.js";import"./transition.0a82ac2b.js";import"./Toast.55bb5cf4.js";import"./index.esm.0a99602f.js";/* empty css              */const qe=({auth:z,...m})=>{const{sources:M,complaincase:oe}=m,[$,C]=v.exports.useState(!1),{data:c,setData:u,post:j,processing:ne,errors:h}=ce({branch:"Kediri",complainsource_id:"",caller_category:"",caller_sub_category:"",caller_contact_name:"",caller_contact_person:"",resi:"",complain_case_id:"",zona:"",sla:"",due_date:"",case_priority:"",followup_by:"",note:""});console.log(h);const x=v.exports.useRef(),E=a=>{x.current.readOnly=a},[b,w]=v.exports.useState("A"),[P,D]=v.exports.useState(!1),[r,k]=v.exports.useState("");console.log(r);const V=M.map(a=>({id:a.id,value:a.id,display:a.source==a.sub_source?a.source:`${a.source} - ${a.sub_source}`})),B=async a=>{C(!0);try{const s=await te.post(route("apiservices.traceconnote.detail-hybrid"),{resi:c.resi});U(),w(s.data.zona),k(s.data),D(!1),E(!0)}catch{u("resi",""),w("A"),k(""),document.getElementById("resi").focus(),D(!0),console.error("eror lo")}C(!1)};let F=m.callers.map(a=>({id:a.id,value:a.id,display:a.caller}));const T=m.sendingoffices.map(a=>({id:a.id,value:a.nomor_debitur,display:a.area==1?`KDR - ${a.nama_agen}`:a.area==2?`TLG - ${a.nama_agen}`:`TRG - ${a.nama_agen}`})),H=a=>{var n,t,q,A;const s=a.target.value;if(s==1){const i={...c,caller_category:s,caller_sub_category:"customer",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==2){const i={...c,caller_category:s,caller_sub_category:"consignee",caller_contact_name:(n=r.receiver_name)!=null?n:"",caller_contact_person:(t=r.receiver_phone)!=null?t:""};u(i)}if(s==3){const i={...c,caller_category:s,caller_sub_category:"shipper",caller_contact_name:(q=r.shipper_name)!=null?q:"",caller_contact_person:(A=r.shipper_phone)!=null?A:""};u(i)}if(s==4){const i={...c,caller_category:s,caller_sub_category:"internal jne",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==5){const i={...c,caller_category:s,caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};u(i)}if(s==6){const i={...c,caller_category:s,caller_sub_category:"corporate",caller_contact_name:"",caller_contact_person:""};u(i)}if(!s){const i={...c,caller_category:"",caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};u(i)}},O=()=>{if(c.caller_category==1)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Customer",disabled:!0})]});if(c.caller_category==2)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Consignee",disabled:!0})]});if(c.caller_category==3)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Shipper",disabled:!0})]});if(c.caller_category==4)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Internal JNE",disabled:!0})]});if(c.caller_category==5)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(g,{required:!0,className:"block w-full mt-1",options:T,nullvalue:!0,name:"caller_sub_category",onChange:p,value:c.caller_sub_category})]});if(c.caller_category==6)return l("div",{className:"mb-2",children:[e(o,{value:"-"}),e(d,{className:"block w-full mt-1",value:"Corporate",disabled:!0})]});if(!c.caller_category)return null},[_,S]=v.exports.useState(),[y,I]=v.exports.useState(),K=()=>{const a=m.complaincase.filter(t=>t.zona==b),n=[...new Set(a.map(t=>t.category))].map(t=>({id:t,value:t,display:t}));return l("div",{className:"col-span-2",children:[e(o,{value:"Category"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,value:_,onChange:Z,options:n})]})},Z=a=>{S(a.target.value)},G=()=>{const a=m.complaincase.filter(t=>t.zona==b&&t.category==_),n=[...new Set(a.map(t=>t.case))].map(t=>({id:t,value:t,display:t}));return l("div",{className:"col-span-2",children:[e(o,{optional:!0,value:"Case"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,onChange:J,value:y,options:n})]})},J=a=>{I(a.target.value)},W=()=>{const s=m.complaincase.filter(n=>n.zona==b&&n.category==_&&n.case==y).map(n=>({id:n.id,value:n.id,display:`${n.sub_case}`}));return l("div",{className:"col-span-2",children:[e(o,{optional:!0,value:"Sub Case"}),e(g,{className:"w-full mt-1",nullvalue:!0,required:!0,onChange:Q,options:s})]})},Q=a=>{const s=m.complaincase.filter(t=>t.id==a.target.value),n={...c,complain_case_id:s[0].id,zona:s[0].zona,sla:s[0].sla,due_date:s[0].sla==0?N().format("DD/MM/YYYY"):N().add(s[0].sla,"day").format("DD/MM/YYYY")};u(n)},U=()=>{S(""),I("");const a={...c,complain_case_id:"",zona:"",sla:"",due_date:""};u(a)},p=a=>{u(a.target.name,a.target.value)},X=[{id:1,value:"critical",display:"critical"},{id:2,value:"hight",display:"high"},{id:3,value:"medium",display:"medium"},{id:4,value:"low",display:"low"}],R=m.followups.map(a=>({id:a.name,value:a.name,display:a.name}));return l(ee,{auth:z,header:l(Y,{children:[e("h2",{className:"font-semibold text-lg text-gray-800 dark:text-white leading-tight",children:"Action Claim"}),e(se,{title:"Approve Claim"})]}),children:[e(re,{show:$}),e(ae,{children:e("form",{onSubmit:a=>{a.preventDefault(),j(route("csoffice.complain.store"))},children:l("div",{className:"grid grid-cols-8 max-w-7xl mx-auto py-4 px-4 lg:px-0",children:[l("div",{className:"col-span-6",children:[e("h1",{className:"mb-2 text-lg",children:"Input Data Ticketing"}),l("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[l("div",{className:"mb-2",children:[e(o,{value:"Branch"}),e(d,{name:"branch",disabled:!0,className:"block w-full mt-1",value:c.branch})]}),l("div",{className:"mb-2",children:[e(o,{value:"Source"}),e(g,{required:!0,name:"complainsource_id",id:"complainsource_id",nullvalue:!0,className:"w-full mt-1",options:V,onChange:p}),e(f,{message:h.complainsource_id,className:"mt-1"})]})]}),l("div",{className:"mb-4",children:[e("h1",{className:"text-lg font-semibold text-gray-400 italic mb-3",children:"Isikan Jika Mempunyai Resi"}),l("div",{className:"flex items-center justify-start gap-4",children:[e(d,{onChange:p,name:"resi",id:"resi",ref:x,value:c.resi}),e(L,{disabled:r,onClick:B,padding:"px-3 py-2",title:"Cek Awb",className:"inline-block"})]}),P&&e(f,{message:"Resi Salah, Periksa Resi Anda Lagi",className:"mt-1"})]}),l("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[l("div",{className:"mb-2",children:[e(o,{value:"Caller"}),e(g,{className:"block w-full mt-1",name:"caller_category",options:F,required:!0,onChange:H,nullvalue:!0,value:c.caller_category}),e(f,{message:h.caller_category,className:"mt-1"})]}),O(),l("div",{className:"mb-2",children:[e(o,{optional:!0,value:"Caller Name"}),e(d,{name:"caller_contact_name",onChange:p,value:c.caller_contact_name,className:"block w-full mt-1"})]}),l("div",{className:"mb-2",children:[e(o,{optional:!0,value:"Caller CP"}),e(d,{name:"caller_contact_person",onChange:p,value:c.caller_contact_person,className:"block w-full mt-1"})]})]}),l("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[K(),_&&G(),y&&W(),l("div",{className:"col-span-1",children:[e(o,{value:"SLA"}),e(d,{className:"mt-1 block w-full",value:c.sla,disabled:!0})]}),l("div",{className:"col-span-1",children:[e(o,{value:"Zone"}),e(d,{className:"mt-1 block w-full",disabled:!0,value:c.zona})]})]}),l("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[l("div",{className:"col-span-2",children:[e(o,{value:"Case Priority"}),e(g,{className:"w-full mt-1",name:"case_priority",options:X,nullvalue:!0,onChange:p,required:!0})]}),l("div",{className:"col-span-1",children:[e(o,{value:"Due Date"}),e(d,{className:"mt-1 block w-full",value:c.due_date,disabled:!0})]}),l("div",{className:"col-span-2",children:[e(o,{value:"Followup By"}),e(g,{className:"w-full mt-1",name:"followup_by",options:R,onChange:p,nullvalue:!0,required:!0})]})]}),e("div",{className:"grid grid-cols-8 gap-2",children:l("div",{className:"col-span-3",children:[e(o,{value:"Note",optional:!0}),e(le,{name:"note",id:"note",className:"mt-1 block w-full",onChange:p})]})}),e("div",{className:"w-full text-right flex gap-3",children:e(L,{className:"ml-auto",type:"submit",title:"submit"})})]}),e("div",{className:"col-span-2",children:l(Y,{children:[l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Nomor AWB"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.connote})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Input Date"}),e("div",{className:"py-2 px-3",children:N(r==null?void 0:r.connote_date).format("DD/MM/YYYY")})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Origin"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.origin})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Destination"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.destination})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.receiver_name})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee Phone"}),e("div",{className:"py-2 px-3",children:e("a",{href:`https://api.whatsapp.com/send/?phone=${r==null?void 0:r.receiver_phone}`,target:"_blank",children:r==null?void 0:r.receiver_phone})})]}),l("div",{className:"grid grid-cols-2 border-b",children:[e("div",{className:"py-2 px-3",children:"Cnee Addres"}),e("div",{className:"py-2 px-3",children:r==null?void 0:r.receiver_city})]})]})})]})})})]})};export{qe as default};
