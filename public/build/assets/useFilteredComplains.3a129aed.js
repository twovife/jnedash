import{r as w,_ as D,j as s,a as e,F as C,g as I,f as B}from"./app.b9f1e905.js";import{d as O}from"./index.esm.0eabf67f.js";import{a as L,b as M}from"./index.esm.f7fb1cf4.js";import{h as A}from"./index.esm.2a42969b.js";/* empty css              */import{T as S}from"./TextInput.5ae182e8.js";import{P as H}from"./PrimaryButton.5ea39586.js";const J=({header:o,link:h,datefilter:l=!1,data:d,filters:u,sendFilter:i,decrementFiter:m,...x})=>{var F,j;const[n,f]=w.exports.useState(""),{serverFilters:N}=D().props;console.log(N);const[a,y]=w.exports.useState({...N}),g=t=>{const{name:r,value:b}=t.target;if(r==="connote")y({...a,[r]:b});else{const p=r.split(".")[0];y({...a,[p]:{...a[p],[r.split(".")[1]]:b}})}};console.log(a);const c=t=>{f(t)};w.exports.useEffect(()=>{const t=r=>{r.target.tagName=="TH"?c(r.target.getAttribute("data-item")):c("")};return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}});const v=t=>{t.preventDefault();const r=document.getElementById("filterinput");i({[r.name]:r.value})},k=t=>{const r={...u};delete r[t],m(r)},T=(t,r=!0,b=!0)=>e("div",{className:"absolute h-full text-white -bottom-full left-0",onClick:p=>p.stopPropagation(),children:s("div",{className:"bg-gray-900",children:[s("div",{className:"flex justify-end items-center text-2xl",children:[e("div",{className:"text-sm font-light px-4 py-2 mr-4",children:"Filters"}),r?s(C,{children:[e(B,{as:"a",method:"get",className:"text-xl py-2 px-4 hover:bg-black focus:border focus:border-blue-500",children:e(L,{})}),e(B,{as:"a",method:"get",className:"text-xl py-2 px-4 hover:bg-black focus:border focus:border-blue-500",children:e(M,{})})]}):s(C,{children:[e("button",{disabled:!0,className:"text-xl py-2 px-4 hover:bg-black focus:border focus:border-blue-500 disabled:cursor-not-allowed",children:e(L,{})}),e("button",{disabled:!0,className:"text-xl py-2 px-4 hover:bg-black focus:border focus:border-blue-500 disabled:cursor-not-allowed",children:e(M,{})})]})]}),e("form",{onSubmit:v,children:e("input",{disabled:!b,id:"filterinput",name:t,className:"w-full font-light text-white bg-gray-700 py-2 px-4 disabled:cursor-not-allowed"})})]})}),V=()=>e("thead",{className:"text-xs text-gray-700 bg-gray-200 border-b border-b-gray-300 dark:border-b-gray-600 dark:bg-gray-700 dark:text-gray-400 sticky top-0",children:s("tr",{className:"text-center",children:[e("th",{className:"px-6 py-1",children:"No"}),o.map((t,r)=>s("th",{scope:"col","data-item":t.column,className:`border-l border-l-gray-300 dark:border-l-gray-600 hover:cursor-pointer relative py-3 px-6 whitespace-nowrap ${n==t.column?"bg-gray-900 text-white":"bg-transparent"}`,children:[t.title,n==t.column&&T(t.column,t.sortable,t.filterable)]},r))]})}),E=()=>e(C,{children:e("div",{className:"inline-block lg:w-72 mb-2",children:Object.entries(u).map(([t,r])=>{const b=o.find(p=>p.column==t).title;return s("div",{className:"flex justify-start items-center gap-3 border hover:bg-green-100 mb-1",children:[e("div",{className:"p-1.5 bg-green-400 text-white text-xl",children:e(A,{})}),s("p",{className:"text-sm text-blue-500",children:[b," = ",r]}),e("button",{onClick:()=>k(t),className:"flex items-center justify-center ml-auto mr-2 focus:border-blue-500 hover:bg-gray-300 p-1 text-xs",children:e(O,{})})]},t)})})});return s("div",{className:"relative mb-3",children:[e("div",{}),l&&s("form",{className:"flex items-center gap-4 mb-3",onSubmit:t=>{t.preventDefault(),I.visit(window.location.href,{data:a})},children:[e("p",{children:"Create On"}),e(S,{name:`${l}.startfrom`,className:"text-xs",type:"date",onChange:g,value:((F=a[l])==null?void 0:F.startfrom)||""}),e("p",{children:"To"}),e(S,{name:`${l}.thru`,className:"text-xs",type:"date",onChange:g,value:((j=a[l])==null?void 0:j.thru)||""}),e(S,{name:"connote",className:"text-xs",placeholder:"awb",type:"text",onChange:g,value:a.connote||""}),e(H,{title:"submit",type:"submit",padding:"px-3 py-2"})]}),E(),e("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mb-3 h-[70vh]",children:s("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400 relative",children:[V(),d]})})]})};function K({currentPage:o,totalPages:h,onPageChange:l}){const d=o>1,u=o<h,i=Math.max(1,o-2),m=Math.min(h,i+4),x=Array.from({length:m-i+1},(n,f)=>i+f);return e("nav",{"aria-label":"Page navigation example",children:s("ul",{className:"flex items-center -space-x-px h-8 text-sm",children:[d&&e("li",{children:s("button",{onClick:()=>l(o-1),className:"flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[e("span",{className:"sr-only",children:"Previous"}),e("svg",{className:"w-2.5 h-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 1 1 5l4 4"})})]})}),x.map(n=>e("li",{children:e("button",{onClick:()=>l(n),disabled:o===n,className:"disabled:bg-gray-500 disabled:text-white flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:n})},n)),u&&e("li",{children:s("button",{onClick:()=>l(o+1),className:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[e("span",{className:"sr-only",children:"Next"}),e("svg",{className:"w-2.5 h-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})})]})})]})})}function Q(o,h){const l=D().props,[d,u]=w.exports.useState(o),[i,m]=w.exports.useState(1),x=l.responses.filter(a=>{var y,g;for(const c in d){if(typeof a[c]=="string"){const v=(y=d[c])==null?void 0:y.toLowerCase();if(!((g=a[c])==null?void 0:g.toLowerCase()).includes(v))return!1}if(typeof a[c]=="number"){const v=d[c],k=a[c];if(parseInt(k)!==parseInt(v))return!1}}return!0}),n=Math.ceil(x.length/h),f=x.slice((i-1)*h,i*h);return{filters:d,setFilters:u,currentPage:i,setCurrentPage:m,displayData:f,totalPages:n,handlePageChange:a=>{m(a)}}}export{J as M,K as P,Q as u};
