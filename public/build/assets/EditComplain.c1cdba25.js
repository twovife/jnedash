import{A as ae,C as le}from"./AuthenticatedLayout.8461eebf.js";import{I as te}from"./InputArea.f6d4ed36.js";import{I as N}from"./InputError.7ca1e7b0.js";import{I as c}from"./InputLabel.c1d08c97.js";import{L as re}from"./LinkButton.b62f666d.js";import{L as se}from"./Loading.cf8ab170.js";import{P as ce}from"./PrimaryButton.1ef4762c.js";import{S as _}from"./SelectList.edf27e8f.js";import{T as u}from"./TextInput.fbecb8e2.js";import{r as g,K as oe,j as t,F as ne,a as e,n as ie}from"./app.474a072e.js";import{d as C}from"./dayjs.min.b640d4d2.js";import"./index.esm.87223c12.js";import{b as ue}from"./index.esm.9612bab6.js";import"./index.esm.8cb04479.js";import"./iconBase.da54b105.js";import"./ResponsiveNavLink.84d29d6c.js";import"./transition.c7963e2f.js";import"./Toast.df73213b.js";import"./index.esm.357b877a.js";/* empty css              */const Ee=({auth:I,complain:o,...m})=>{var x,D,k,S,L;const{sources:R,complaincase:z}=m,[A,de]=g.exports.useState(!1),{data:l,setData:d,put:E,processing:j,errors:w}=oe({branch:o.branch,complainsource_id:o.complainsource_id,caller_category:(x=o.caller_category)!=null?x:"",caller_sub_category:(D=o.caller_sub_category)!=null?D:"",caller_contact_name:(k=o.caller_contact_name)!=null?k:"",caller_contact_person:(S=o.caller_contact_person)!=null?S:"",resi:o.cnote.connote,complain_case_id:(L=o.complain_case_id)!=null?L:"",zona:o.zona,sla:o.sla,due_date:C(o.due_date).format("DD/MM/YYYY"),case_priority:o.case_priority,followup_by:o.followup_by,note:o.note}),v=z.find(a=>a.id==o.complain_case_id),M=g.exports.useRef(),[h,me]=g.exports.useState("A"),[T,pe]=g.exports.useState(!1),[f,_e]=g.exports.useState(""),V=R.map(a=>({id:a.id,value:a.id,display:a.source==a.sub_source?a.source:`${a.source} - ${a.sub_source}`}));let $=m.callers.map(a=>({id:a.id,value:a.id,display:a.caller}));const F=m.sendingoffices.map(a=>({id:a.id,value:a.nomor_debitur,display:a.area==1?`KDR - ${a.nama_agen}`:a.area==2?`TLG - ${a.nama_agen}`:`TRG - ${a.nama_agen}`})),H=a=>{var n,s,q,Y;const r=a.target.value;if(r==1){const i={...l,caller_category:r,caller_sub_category:"customer",caller_contact_name:"",caller_contact_person:""};d(i)}if(r==2){const i={...l,caller_category:r,caller_sub_category:"consignee",caller_contact_name:(n=f.receiver_name)!=null?n:"",caller_contact_person:(s=f.receiver_phone)!=null?s:""};d(i)}if(r==3){const i={...l,caller_category:r,caller_sub_category:"shipper",caller_contact_name:(q=f.shipper_name)!=null?q:"",caller_contact_person:(Y=f.shipper_phone)!=null?Y:""};d(i)}if(r==4){const i={...l,caller_category:r,caller_sub_category:"internal jne",caller_contact_name:"",caller_contact_person:""};d(i)}if(r==5){const i={...l,caller_category:r,caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};d(i)}if(r==6){const i={...l,caller_category:r,caller_sub_category:"corporate",caller_contact_name:"",caller_contact_person:""};d(i)}if(!r){const i={...l,caller_category:"",caller_sub_category:"",caller_contact_name:"",caller_contact_person:""};d(i)}},P=()=>{if(l.caller_category==1)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(u,{className:"block w-full mt-1",value:"Customer",disabled:!0})]});if(l.caller_category==2)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(u,{className:"block w-full mt-1",value:"Consignee",disabled:!0})]});if(l.caller_category==3)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(u,{className:"block w-full mt-1",value:"Shipper",disabled:!0})]});if(l.caller_category==4)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(u,{className:"block w-full mt-1",value:"Internal JNE",disabled:!0})]});if(l.caller_category==5)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(_,{required:!0,className:"block w-full mt-1",options:F,nullvalue:!0,name:"caller_sub_category",onChange:p,value:l.caller_sub_category})]});if(l.caller_category==6)return t("div",{className:"mb-2",children:[e(c,{value:"-"}),e(u,{className:"block w-full mt-1",value:"Corporate",disabled:!0})]});if(!l.caller_category)return null},[b,B]=g.exports.useState(v?v.category:""),[y,G]=g.exports.useState(v?v.case:""),J=()=>{const a=m.complaincase.filter(s=>s.zona==h),n=[...new Set(a.map(s=>s.category))].map(s=>({id:s,value:s,display:s}));return t("div",{className:"col-span-2",children:[e(c,{value:"Category"}),e(_,{className:"w-full mt-1",nullvalue:!0,required:!0,value:b,onChange:K,options:n})]})},K=a=>{B(a.target.value)},O=()=>{const a=m.complaincase.filter(s=>s.zona==h&&s.category==b),n=[...new Set(a.map(s=>s.case))].map(s=>({id:s,value:s,display:s}));return t("div",{className:"col-span-2",children:[e(c,{optional:!0,value:"Case"}),e(_,{className:"w-full mt-1",nullvalue:!0,required:!0,onChange:Z,value:y,options:n})]})},Z=a=>{G(a.target.value)},W=()=>{const r=m.complaincase.filter(n=>n.zona==h&&n.category==b&&n.case==y).map(n=>({id:n.id,value:n.id,display:`${n.sub_case}`}));return t("div",{className:"col-span-2",children:[e(c,{optional:!0,value:"Sub Case"}),e(_,{className:"w-full mt-1",nullvalue:!0,required:!0,value:l.complain_case_id,onChange:Q,options:r})]})},Q=a=>{const r=m.complaincase.filter(s=>s.id==a.target.value);console.log(r);const n={...l,complain_case_id:r[0].id,zona:r[0].zona,sla:r[0].sla,due_date:r[0].sla==0?C().format("DD/MM/YYYY"):C().add(r[0].sla,"day").format("DD/MM/YYYY")};d(n)},p=a=>{d(a.target.name,a.target.value)},U=[{id:1,value:"critical",display:"critical"},{id:2,value:"hight",display:"high"},{id:3,value:"medium",display:"medium"},{id:4,value:"low",display:"low"}],X=m.followups.map(a=>({id:a.name,value:a.name,display:a.name})),ee=a=>{a.preventDefault(),E(route("csoffice.complain.update",o.id))};return t(ae,{auth:I,header:t(ne,{children:[e("h2",{className:"font-semibold text-lg text-gray-800 dark:text-white leading-tight",children:"Action Claim"}),e(ie,{title:"Approve Claim"}),e("div",{className:"ml-auto flex items-center justify-center",children:e(re,{href:route("csoffice.complain.destroy",o.id),as:"button",title:"Hapus",method:"DELETE",theme:"danger",icon:e(ue,{})})})]}),children:[e(se,{show:A}),e(le,{children:e("form",{onSubmit:ee,children:t("div",{className:"max-w-7xl mx-auto py-4 px-4 lg:px-0",children:[e("h1",{className:"mb-2 text-lg",children:"Input Data Ticketing"}),t("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[t("div",{className:"mb-2",children:[e(c,{value:"Branch"}),e(u,{name:"branch",disabled:!0,className:"block w-full mt-1",value:l.branch})]}),t("div",{className:"mb-2",children:[e(c,{value:"Source"}),e(_,{required:!0,name:"complainsource_id",id:"complainsource_id",nullvalue:!0,value:l.complainsource_id,className:"w-full mt-1",options:V,onChange:p}),e(N,{message:w.complainsource_id,className:"mt-1"})]})]}),t("div",{className:"mb-4",children:[e("h1",{className:"text-lg font-semibold text-gray-400 italic mb-3",children:"Isikan Jika Mempunyai Resi"}),e("div",{className:"flex items-center justify-start gap-4",children:e(u,{onChange:p,name:"resi",id:"resi",ref:M,readOnly:!0,value:l.resi})}),T&&e(N,{message:"Resi Salah, Periksa Resi Anda Lagi",className:"mt-1"})]}),t("div",{className:"grid grid-cols-4 gap-x-4 mb-4",children:[t("div",{className:"mb-2",children:[e(c,{value:"Caller"}),e(_,{className:"block w-full mt-1",name:"caller_category",options:$,required:!0,onChange:H,nullvalue:!0,value:l.caller_category}),e(N,{message:w.caller_category,className:"mt-1"})]}),P(),t("div",{className:"mb-2",children:[e(c,{optional:!0,value:"Caller Name"}),e(u,{name:"caller_contact_name",onChange:p,value:l.caller_contact_name,className:"block w-full mt-1"})]}),t("div",{className:"mb-2",children:[e(c,{optional:!0,value:"Caller CP"}),e(u,{name:"caller_contact_person",onChange:p,value:l.caller_contact_person,className:"block w-full mt-1"})]})]}),t("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[J(),b&&O(),y&&W(),t("div",{className:"col-span-1",children:[e(c,{value:"SLA"}),e(u,{className:"mt-1 block w-full",value:l.sla,disabled:!0})]}),t("div",{className:"col-span-1",children:[e(c,{value:"Zone"}),e(u,{className:"mt-1 block w-full",disabled:!0,value:l.zona})]})]}),t("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[t("div",{className:"col-span-2",children:[e(c,{value:"Case Priority"}),e(_,{className:"w-full mt-1",name:"case_priority",options:U,nullvalue:!0,value:l.case_priority,onChange:p,required:!0})]}),t("div",{className:"col-span-1",children:[e(c,{value:"Due Date"}),e(u,{className:"mt-1 block w-full",value:l.due_date,disabled:!0})]}),t("div",{className:"col-span-2",children:[e(c,{value:"Followup By"}),e(_,{className:"w-full mt-1",name:"followup_by",options:X,value:l.followup_by,onChange:p,nullvalue:!0,required:!0})]})]}),e("div",{className:"grid grid-cols-8 gap-2",children:t("div",{className:"col-span-3",children:[e(c,{value:"Note",optional:!0}),e(te,{name:"note",value:l.note,id:"note",className:"mt-1 block w-full",onChange:p})]})}),e("div",{className:"w-full text-right flex gap-3",children:e(ce,{disabled:j,className:"ml-auto",type:"submit",title:"submit"})})]})})})]})};export{Ee as default};
